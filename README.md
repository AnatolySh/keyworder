# Keyworder: Автоматический Генератор Ключевых Слов и Заголовков

Это приложение поможет вам автоматически создавать заголовки и релевантные ключевые слова для ваших изображений и видео, используя возможности искусственного интеллекта от OpenAI.

## Как работает?

- Keyworder анализирует изображения и видео, извлекая из них кадры, и отправляет их в ChatGPT для генерации заголовка и ключевых слов
- Результаты сохраняются в CSV-файлах adobestock.csv и stocksubmitter.csv
- adobestock.csv для загрузки сразу на адоб
- stocksubmitter.csv чтобы прикрепить медатанные к файлам в соответствующем софте

## Начало Работы

### СКАЧАТЬ

Скачать программу можно отсюда:
### [Windows](https://github.com/AnatolySh/keyworder/releases/download/v0.1/keyworder-win.zip) 
### [macOS](https://github.com/AnatolySh/keyworder/releases/download/v0.1/keyworder-mac.zip)

### Поддержка

Если возникают вопросы, их можно задать в соответствующей группе в телеграм https://t.me/microstock_keyworder

### Первый Запуск и Настройка

1.  **Найдите файл `settings.json`**: Этот файл находится в подпапке _internal
2.  **Откройте `settings.json`**: Используйте любой текстовый редактор (например, VS Code или блокнот).
3.  **Введите ваш ключ OpenAI API**: Найдите строку `"OPENAI_API_KEY` и замените значение на ваш действующий API ключ от OpenAI. **Это самый важный шаг!** Без ключа приложение не сможет работать. (Подробнее о том, где взять ключ, читайте ниже).
4.  **Сохраните изменения** в файле `settings.json`.
5.  **Подготовьте файлы для обработки**:
    * Внутри папки с приложением `keyworder` создайте (если её нет) папку с названием `input`.
    * Поместите все изображения и видео, которые вы хотите обработать, в эту папку `input`.
6.  **Запустите приложение**:
    * Дважды кликните по исполняемому файлу `keyworder` в папке приложения.
    * Приложение является консольным, поэтому при запуске откроется окно Терминала, где будет отображаться прогресс обработки. Не закрывайте это окно, пока приложение работает.
    * **Примечание для продвинутых пользователей:** Вы также можете запускать приложение из Терминала, передавая пути к папкам через аргументы командной строки (см. `keyworder --help` для деталей).

### Входные и Выходные Данные

* **Папка для входных файлов (`input/`)**: По умолчанию приложение ищет медиафайлы в папке `input`, расположенной рядом с исполняемым файлом `keyworder`.
* **Папка для выходных файлов (`output/`)**: Результаты обработки (CSV-файлы) сохраняются в папку `output`, которая также создается рядом с `keyworder`. Вы найдете там два файла:
    * `adobestock.csv`
    * `stocksubmitter.csv`
* **Папка для логов (`logs/`)**: Подробная информация о ходе работы, а также возможные ошибки, записываются в файл `processing.log` внутри папки `logs`.
* **Папка для ошибочных файлов (`errors/`)**: Если приложение не сможет обработать какой-либо файл (например, из-за невозможности сгенерировать метаданные после нескольких попыток), этот исходный файл будет перемещен в папку `errors` (внутри папки `input`), чтобы он не мешал обработке остальных файлов.

## Файл Настроек: `settings.json`

### Где найти и как редактировать

Файл `settings.json` находится в подпапке _internal. Вы можете открыть его любым текстовым редактором.

**Важно:** Файл `settings.json` использует формат JSON. Будьте внимательны при редактировании:
* Текстовые значения должны быть в двойных кавычках (например, `"INFO"`).
* Числа пишутся без кавычек (например, `10`).
* Списки заключаются в квадратные скобки `[]`, а элементы списка разделяются запятыми (например, `[".jpg", ".jpeg"]`).
* Убедитесь, что после последнего элемента в списке или блоке настроек нет лишней запятой.

### Описание Параметров

* **`OPENAI_API_KEY`**: (Строка, **Обязательный параметр**)
    * Ваш секретный ключ доступа к API OpenAI. **Никогда не делитесь этим ключом с кем-либо и не публикуйте его в открытом доступе!**
    * Пример: `"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"`

* **`MAX_WORKERS`**: (Число, опционально)
    * Максимальное количество файлов, которые приложение будет обрабатывать одновременно. Большее значение может ускорить работу на мощных компьютерах с быстрым интернетом, но также увеличит нагрузку на API OpenAI. Лучше не ставить значение больше, чем количество ядер процессора.

* **`LOG_LEVEL`**: (Строка, опционально)
    * Уровень детализации информации, записываемой в лог-файл (`processing.log`).
    * Возможные значения: `"DEBUG"` (очень подробно), `"INFO"` (стандартная информация), `"WARNING"` (только предупреждения и ошибки), `"ERROR"` (только ошибки).
    * Значение по умолчанию: `"INFO"`

* **`DEFAULT_LOG_DIR`**: (Строка, опционально)
    * Путь к папке, где будут сохраняться лог-файлы. Может быть относительным (например, `"./logs"`) или абсолютным.
    * Если оставить пустым (`""`) или не указать, логи будут сохраняться в папку `logs` рядом с приложением.

* **`IMAGE_EXTENSIONS`**: (Список строк, опционально)
    * Список расширений файлов, которые приложение будет считать изображениями.
    * Пример: `[".jpg", ".jpeg", ".png", ".webp"]`
    * Значение по умолчанию: `[".jpg", ".jpeg", ".png"]`

* **`VIDEO_EXTENSIONS`**: (Список строк, опционально)
    * Список расширений файлов, которые приложение будет считать видео.
    * Пример: `[".mp4", ".mov", ".avi", ".mkv"]`
    * Значение по умолчанию: `[".mp4", ".mov"]`

* **`OPENAI_MODEL`**: (Строка, опционально)
    * Модель OpenAI, используемая для генерации метаданных.
    * Значение по умолчанию: `"gpt-4o-mini"`. Чем "умнее" модель - тем потенциально лучше она может проключевать, но и стоить будет дороже. На `"gpt-4o-mini"` получается около $1 за 1000 картинок или 500 видео. Вы можете любую модель из списка доступных в OpenAI

* **`LLM_GENERATION_PROMPT`**: (Строка, **Обязательный параметр**)
    * Это основная инструкция (промпт), которая дается искусственному интеллекту для генерации заголовков и ключевых слов.

* **`STOP_WORDS`**: (Список строк, опционально)
    * Список слов, которые будут автоматически удалены из сгенерированных ключевых слов. Это помогает избавиться от общих или нерелевантных слов.
    * Вы можете добавлять или удалять слова из этого списка.
    * Значение по умолчанию включает распространенные артикли и предлоги

## Как получить OpenAI API Ключ

Для работы приложения Keyworder вам необходим API ключ от OpenAI.

1.  **Зарегистрируйтесь или войдите в OpenAI**: Перейдите на сайт [platform.openai.com](https://platform.openai.com/).
2.  **Перейдите в раздел API ключей**: После входа в систему найдите в меню слева раздел "API keys" или перейдите напрямую по ссылке: [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys).
3.  **Создайте новый секретный ключ**
4.  **Скопируйте и сохраните ключ**:
    * Сразу после создания **скопируйте появившийся ключ** (он будет начинаться с `sk-`).
    * **Важно:** Этот ключ будет показан вам только один раз. Обязательно сохраните его в надежном месте. Если вы его потеряете, придется создавать новый.
5.  **Вставьте ключ в `settings.json`**: Откройте файл `settings.json` и вставьте скопированный ключ в значение параметра `OPENAI_API_KEY`.

**Обратите внимание:**
* Храните ваш API ключ в секрете! Не передавайте его третьим лицам и не публикуйте в интернете.

## Возможные Проблемы и Их Решение

* **Приложение не запускается / Ошибки `ffmpeg`**:
    * Убедитесь, что исполняемый файл `keyworder` имеет права на запуск (на macOS может потребоваться дать разрешение на запуск в настройках. Также может потребоваться дать права на выполение ffmpeg. Если на macOS появилось сообщение что приложение не было запущено, откройте настройки, раздел Privacy & Security, дайте разрешение на запук и запустите снова).
    * Убедитель, что папка _internal находится в той же папке, что и приложение.
    * Подробная информация об ошибке будет в лог-файле (`logs/processing.log`).

* **Ошибки, связанные с API ключом OpenAI**:
    * **"OPENAI_API_KEY not found"**: Убедитесь, что вы правильно вставили ключ в `settings.json` и сохранили файл.
    * **Ошибки аутентификации / неверный ключ**: Перепроверьте, что ключ скопирован без ошибок, не содержит лишних пробелов и активен.
    * **Превышены лимиты / проблемы с оплатой**: Проверьте ваш аккаунт на платформе OpenAI. Возможно, у вас закончились деньги на счете

* **Файлы не обрабатываются**:
    * Убедитесь, что файлы находятся в папке `input`
    * Проверьте, что расширения ваших файлов есть в списках `IMAGE_EXTENSIONS` или `VIDEO_EXTENSIONS` в `settings.json`.
    * Файл может быть поврежден.

* **Медленная обработка**:
    * Обработка большого количества файлов или очень длинных видео может занять время.
    * Скорость также зависит от вашего интернет-соединения.
    * Вы можете попробовать увеличить значение `MAX_WORKERS` в `settings.json`. Но не ставьте значение выше количества ядер процессора и убедитесь, что не будет превышен лимит API на одновременные запросы

* **Файлы в папке `errors`**:
    * Если файл оказался в папке `input/errors/` (или `ваша_папка_ввода/errors/`), это означает,  что приложение не смогло сгенерировать для него метаданные даже после повторной попытки. Проверьте лог-файл для получения подробностей.

* **Просмотр логов**:
    * Если что-то идет не так, первым делом загляните в файл `processing.log` в папке `logs`. Там записывается подробная информация о ходе работы и ошибках. Если вы обращаетесь за помощью, содержимое этого файла может быть очень полезным.
    * Для получения еще более подробной информации (для отладки) вы можете изменить `LOG_LEVEL` в `settings.json` на `"DEBUG"`.
    * Если нужна дополнительная поддержка, то ее можно получить в группе телеграм https://t.me/microstock_keyworder
